plugins {
    id 'java'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}

repositories { mavenCentral() }

java {
    toolchain { languageVersion = JavaLanguageVersion.of(17) }
}

def os = org.gradle.internal.os.OperatingSystem.current()
def platform = os.isWindows() ? 'win' : (os.isMacOsX() ? 'mac' : 'linux')
def fxVer = '17.0.8'

dependencies {
    implementation "org.openjfx:javafx-base:${fxVer}:${platform}"
    implementation "org.openjfx:javafx-graphics:${fxVer}:${platform}"
    implementation "org.openjfx:javafx-controls:${fxVer}:${platform}"
    implementation "org.openjfx:javafx-fxml:${fxVer}:${platform}"

    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.10.0'
    testRuntimeOnly  'org.junit.jupiter:junit-jupiter-engine:5.10.0'
}

test { useJUnitPlatform() }

application {
    mainClass.set("friday.Launcher")
}

shadowJar {
    archiveBaseName = "duke"
    archiveClassifier = null
}

run {
    standardInput = System.in
}
